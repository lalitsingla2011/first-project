:root {
  --bg:       #0d0d12;
  --surface:  #13131a;
  --surface2: #1a1a24;
  --border:   rgba(255,255,255,0.08);
  --accent:   #5b8dee;
  --text:     #f0f0f5;
  --text2:    #a0a0b8;
  --muted:    #55556a;
  --warning:  #f5a623;
  --radius:   16px;
  --fh:       'Sora', sans-serif;
  --fb:       'Inter', sans-serif;

  /* Email category colours */
  --work:     #5b8dee;
  --social:   #a855f7;
  --shopping: #f97316;
  --finance:  #22c55e;
  --other:    #55556a;
}
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

body {
  background: var(--bg);
  color: var(--text);
  font-family: var(--fb);
  font-size: 14px;
  line-height: 1.6;
  min-height: 100vh;
  padding: 24px;
  background-image:
    radial-gradient(ellipse 70% 40% at 15% 5%,  rgba(91,141,238,0.07) 0%, transparent 60%),
    radial-gradient(ellipse 50% 30% at 85% 90%, rgba(168,85,247,0.05) 0%, transparent 60%);
}

/* ── GRID ── */
.grid {
  max-width: 1120px;
  margin: 0 auto;
  display: grid;
  grid-template-columns: repeat(12, 1fr);
  gap: 14px;
}
.c-clock    { grid-column: span 4; }
.c-weather  { grid-column: span 8; }
.c-gmail    { grid-column: span 6; }
.c-calendar { grid-column: span 6; }
.c-todo     { grid-column: span 6; }
.c-reminder { grid-column: span 6; }
.c-notes    { max-width: 1120px; margin: 14px auto 0; width: 100%; cursor: default; }

@media (max-width: 820px) {
  .c-clock,.c-weather,.c-gmail,.c-calendar,
  .c-todo,.c-reminder { grid-column: span 12; }
}

/* ── CARD ── */
.card {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 22px 24px;
  position: relative;
  overflow: hidden;
  animation: up 0.4s ease both;
  display: flex;
  flex-direction: column;
}
.card:nth-child(1){animation-delay:.04s}.card:nth-child(2){animation-delay:.09s}
.card:nth-child(3){animation-delay:.14s}.card:nth-child(4){animation-delay:.19s}
.card:nth-child(5){animation-delay:.24s}.card:nth-child(6){animation-delay:.29s}
.card:nth-child(7){animation-delay:.34s}
@keyframes up { from{opacity:0;transform:translateY(12px)} to{opacity:1;transform:translateY(0)} }

.card-label {
  font-size: 10px;
  font-weight: 600;
  letter-spacing: 1.5px;
  text-transform: uppercase;
  color: var(--muted);
  margin-bottom: 14px;
  flex-shrink: 0;
}

/* ── CLOCK ── */
#clock-time { font-family:var(--fh); font-size:clamp(36px,5vw,56px); font-weight:800; letter-spacing:-1.5px; line-height:1; }
#clock-date { margin-top:8px; font-size:13px; color:var(--text2); }
#clock-greeting { margin-top:14px; font-size:12px; color:var(--muted); font-weight:500; }

/* Quote inside clock card */
.clock-quote-divider { border:none; border-top:1px solid var(--border); margin:18px 0 14px; }
.clock-quote-mark { font-family:var(--fh); font-size:32px; line-height:0.7; color:var(--accent); opacity:0.25; user-select:none; }
#clock-quote-text { font-family:var(--fh); font-size:12px; font-weight:600; line-height:1.55; color:var(--text); margin-top:8px; }
#clock-quote-author { font-size:11px; color:var(--muted); margin-top:6px; }
#clock-quote-author::before { content:'— '; }

/* ── WEATHER ── */
.weather-main   { display:flex; align-items:center; gap:16px; }
.weather-icon   { font-size:46px; line-height:1; }
.weather-temp   { font-family:var(--fh); font-size:46px; font-weight:700; line-height:1; }
.weather-desc   { font-size:13px; color:var(--text2); margin-top:3px; }
.weather-pills  { display:flex; gap:10px; margin-top:16px; flex-wrap:wrap; }
.weather-pill   { background:var(--surface2); border-radius:8px; padding:6px 12px; font-size:12px; color:var(--text2); }
.weather-pill strong { color:var(--text); font-weight:600; display:block; font-size:13px; }
.weather-forecast { display:flex; gap:8px; margin-top:16px; flex-wrap:wrap; }
.forecast-day {
  background: var(--surface2);
  border-radius: 10px;
  padding: 10px 12px;
  flex: 1;
  min-width: 70px;
  text-align: center;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
}
.forecast-day-name  { font-size: 11px; font-weight: 600; color: var(--muted); text-transform: uppercase; letter-spacing: .5px; }
.forecast-day-icon  { font-size: 22px; line-height: 1; }
.forecast-day-temps { font-size: 12px; font-weight: 600; color: var(--text); }
.forecast-day-lo    { font-size: 11px; color: var(--muted); }


/* ── FORECAST DAY DETAIL ── */
.forecast-day {
  position: relative;
  cursor: pointer;
  transition: background 0.15s, transform 0.15s;
}
.forecast-day:hover { background: var(--surface); transform: translateY(-2px); }
.forecast-day.active { background: var(--surface); outline: 2px solid var(--accent); outline-offset: -2px; }

.forecast-popover {
  display: none;
  position: absolute;
  bottom: calc(100% + 10px);
  left: 50%;
  transform: translateX(-50%);
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 14px 16px;
  min-width: 180px;
  z-index: 200;
  box-shadow: 0 8px 32px rgba(0,0,0,0.45);
  animation: fadeIn 0.15s ease;
  pointer-events: none;
}
.forecast-day.active .forecast-popover { display: block; }
.forecast-popover::after {
  content: '';
  position: absolute;
  top: 100%; left: 50%;
  transform: translateX(-50%);
  border: 7px solid transparent;
  border-top-color: var(--border);
}
.forecast-popover::before {
  content: '';
  position: absolute;
  top: calc(100% - 1px); left: 50%;
  transform: translateX(-50%);
  border: 7px solid transparent;
  border-top-color: var(--surface);
  z-index: 1;
}
.fp-title  { font-size:12px; font-weight:700; color:var(--text); margin-bottom:10px; }
.fp-row    { display:flex; justify-content:space-between; align-items:center; gap:12px; margin-bottom:6px; }
.fp-label  { font-size:11px; color:var(--muted); }
.fp-value  { font-size:12px; font-weight:600; color:var(--text); }
.fp-desc   { font-size:11px; color:var(--text2); margin-top:8px; text-align:center; }

/* ── SETUP NOTICE ── */
.setup-notice {
  background: var(--surface2);
  border: 1px dashed rgba(91,141,238,0.3);
  border-radius: 10px;
  padding: 20px;
  text-align: center;
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 10px;
}
.setup-notice .si { font-size:28px; }
.setup-notice p   { font-size:13px; color:var(--text2); line-height:1.6; }
.setup-notice strong { color:var(--text); }

.btn-connect {
  background: var(--accent);
  color: white;
  border: none;
  border-radius: 8px;
  padding: 9px 20px;
  font-family: var(--fb);
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  transition: opacity 0.2s;
}
.btn-connect:hover { opacity: 0.85; }

/* ── GMAIL ── */
#gmail-connected { display:none; flex-direction:column; flex:1; min-height:0; }

/* Category tabs */
.email-tabs {
  display: flex;
  gap: 4px;
  margin-bottom: 12px;
  flex-shrink: 0;
  flex-wrap: wrap;
}
.email-tab {
  display: flex;
  align-items: center;
  gap: 5px;
  padding: 5px 11px;
  border-radius: 20px;
  border: 1px solid var(--border);
  background: transparent;
  color: var(--text2);
  font-family: var(--fb);
  font-size: 11px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s;
  white-space: nowrap;
}
.email-tab:hover { background: var(--surface2); color: var(--text); }
.email-tab.active { color: #fff; border-color: transparent; }
.email-tab.active.tab-all      { background: rgba(255,255,255,0.12); }
.email-tab.active.tab-work     { background: var(--work); }
.email-tab.active.tab-social   { background: var(--social); }
.email-tab.active.tab-shopping { background: var(--shopping); }
.email-tab.active.tab-finance  { background: var(--finance); }
.email-tab.active.tab-other    { background: var(--muted); }
.tab-dot { width:7px; height:7px; border-radius:50%; flex-shrink:0; }
.tab-count { background:rgba(0,0,0,0.2); border-radius:8px; padding:0 5px; font-size:10px; font-weight:600; min-width:16px; text-align:center; }

/* Scrollable email list */
.email-scroll {
  flex: 1;
  overflow-y: auto;
  min-height: 0;
  max-height: 300px;
  display: flex;
  flex-direction: column;
  gap: 6px;
  padding-right: 4px;
}
.email-scroll::-webkit-scrollbar { width: 3px; }
.email-scroll::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }

/* ── EMAIL MODAL ── */
.email-modal-backdrop {
  display: none;
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.75);
  backdrop-filter: blur(6px);
  z-index: 1000;
  align-items: center;
  justify-content: center;
  padding: 24px;
}
.email-modal-backdrop.open { display: flex; animation: fadeIn 0.18s ease; }
@keyframes fadeIn { from{opacity:0} to{opacity:1} }
.email-modal {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  width: 100%;
  max-width: 740px;
  max-height: 88vh;
  display: flex;
  flex-direction: column;
  animation: slideUp 0.2s ease;
  overflow: hidden;
}
@keyframes slideUp { from{opacity:0;transform:translateY(14px)} to{opacity:1;transform:translateY(0)} }
.modal-header { padding: 20px 24px 14px; border-bottom: 1px solid var(--border); flex-shrink: 0; }
.modal-header-top { display:flex; align-items:flex-start; gap:12px; margin-bottom:10px; }
.modal-subject { font-family:var(--fh); font-size:16px; font-weight:700; color:var(--text); flex:1; line-height:1.35; }
.modal-close {
  background: var(--surface2); border: 1px solid var(--border); color: var(--text2);
  border-radius: 8px; width:32px; height:32px; display:flex; align-items:center; justify-content:center;
  cursor:pointer; font-size:16px; flex-shrink:0; transition:all 0.15s; line-height:1;
}
.modal-close:hover { background: rgba(255,255,255,0.08); color: var(--text); }
.modal-from  { font-size:12px; color:var(--text2); margin-bottom:6px; }
.modal-from strong { color:var(--text); font-weight:600; }
.modal-meta  { display:flex; gap:10px; align-items:center; flex-wrap:wrap; }
.modal-date  { font-size:11px; color:var(--muted); }
.modal-cat-badge { font-size:10px; font-weight:700; padding:2px 8px; border-radius:20px; }
.modal-body {
  flex:1; overflow-y:auto; padding:20px 24px;
  font-size:13px; color:var(--text2); line-height:1.8;
}
.modal-body::-webkit-scrollbar { width:4px; }
.modal-body::-webkit-scrollbar-thumb { background:var(--border); border-radius:4px; }
.modal-body a { color:var(--accent); }
.modal-body pre { white-space:pre-wrap; font-family:var(--fb); }
.modal-loading { text-align:center; padding:48px; color:var(--muted); font-size:13px; }

.email-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 12px;
  background: var(--surface2);
  border-radius: 10px;
  border-left: 3px solid var(--other);
  transition: background 0.15s;
  cursor: default;
  flex-shrink: 0;
}
.email-item:hover { background: rgba(255,255,255,0.05); }
.email-item.cat-work     { border-left-color: var(--work); }
.email-item.cat-social   { border-left-color: var(--social); }
.email-item.cat-shopping { border-left-color: var(--shopping); }
.email-item.cat-finance  { border-left-color: var(--finance); }

.email-cat-dot {
  width: 8px; height: 8px;
  border-radius: 50%;
  flex-shrink: 0;
  background: var(--other);
}
.cat-work     .email-cat-dot { background: var(--work); }
.cat-social   .email-cat-dot { background: var(--social); }
.cat-shopping .email-cat-dot { background: var(--shopping); }
.cat-finance  .email-cat-dot { background: var(--finance); }

.email-unread-dot {
  width: 6px; height: 6px;
  border-radius: 50%;
  background: white;
  flex-shrink: 0;
  opacity: 0;
}
.email-item.unread .email-unread-dot { opacity: 1; }

.email-body   { flex: 1; min-width: 0; }
.email-sender { font-size: 13px; font-weight: 600; color: var(--text); white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.email-item.unread .email-sender { color: white; }
.email-subject{ font-size: 12px; color: var(--text2); white-space:nowrap; overflow:hidden; text-overflow:ellipsis; margin-top:1px; }

.email-meta   { text-align: right; flex-shrink: 0; }
.email-time   { font-size: 11px; color: var(--muted); }
.email-badge  { font-size: 10px; font-weight: 600; padding: 1px 6px; border-radius: 4px; margin-top: 3px; display:inline-block; }
.badge-work     { background: rgba(91,141,238,0.15); color: #88aaff; }
.badge-social   { background: rgba(168,85,247,0.15); color: #c084fc; }
.badge-shopping { background: rgba(249,115,22,0.15); color: #fb923c; }
.badge-finance  { background: rgba(34,197,94,0.15);  color: #4ade80; }

/* ── CALENDAR ── */
#gcal-connected { display:none; flex-direction:column; flex:1; min-height:0; }

.cal-scroll {
  flex: 1;
  overflow-y: auto;
  min-height: 0;
  max-height: 300px;
  display: flex;
  flex-direction: column;
  gap: 7px;
  padding-right: 4px;
}
.cal-scroll::-webkit-scrollbar { width: 3px; }
.cal-scroll::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }

.cal-item {
  display: flex;
  align-items: stretch;
  gap: 12px;
  padding: 10px 12px;
  background: var(--surface2);
  border-radius: 10px;
  flex-shrink: 0;
}
.cal-item.all-day { border-left: 3px solid var(--accent); }

.cal-time-col { min-width: 44px; flex-shrink: 0; display:flex; flex-direction:column; justify-content:center; }
.cal-time     { font-size: 13px; font-weight: 600; color: var(--text); line-height:1.2; }
.cal-ampm     { font-size: 10px; color: var(--muted); }
.cal-divider  { width: 2px; background: var(--accent); border-radius: 2px; flex-shrink:0; }
.cal-info     { flex: 1; min-width: 0; display:flex; flex-direction:column; justify-content:center; }
.cal-title    { font-size: 13px; font-weight: 500; color: var(--text); white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.cal-loc      { font-size: 11px; color: var(--muted); margin-top:2px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }

/* ── TODO ── */
.input-row { display:flex; gap:8px; margin-bottom:12px; flex-shrink:0; }

input[type="text"], input[type="datetime-local"] {
  background: var(--surface2);
  border: 1px solid var(--border);
  border-radius: 9px;
  padding: 9px 13px;
  color: var(--text);
  font-family: var(--fb);
  font-size: 13px;
  outline: none;
  width: 100%;
  transition: border-color 0.2s;
}
input:focus { border-color: var(--accent); }
input::placeholder { color: var(--muted); }
input[type="datetime-local"]::-webkit-calendar-picker-indicator { filter: invert(0.4); cursor: pointer; }

.btn {
  background: var(--accent);
  color: white;
  border: none;
  border-radius: 9px;
  padding: 9px 15px;
  cursor: pointer;
  font-family: var(--fb);
  font-size: 13px;
  font-weight: 600;
  white-space: nowrap;
  transition: opacity 0.2s;
  flex-shrink: 0;
}
.btn:hover { opacity: 0.85; }

.btn-x {
  background: transparent;
  border: none;
  color: var(--muted);
  cursor: pointer;
  font-size: 16px;
  padding: 0 4px;
  line-height: 1;
  transition: color 0.2s;
  flex-shrink: 0;
}
.btn-x:hover { color: #ee5b8d; }

.item-scroll {
  overflow-y: auto;
  flex: 1;
  min-height: 0;
  max-height: 220px;
  display: flex;
  flex-direction: column;
  gap: 6px;
  padding-right: 4px;
}
.item-scroll::-webkit-scrollbar { width: 3px; }
.item-scroll::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }

.todo-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 9px 12px;
  background: var(--surface2);
  border-radius: 9px;
  border: 1px solid transparent;
  flex-shrink: 0;
  transition: border-color 0.15s;
}
.todo-item:hover { border-color: var(--border); }
.todo-item input[type="checkbox"] { accent-color:var(--accent); width:15px; height:15px; cursor:pointer; flex-shrink:0; }
.todo-text { flex:1; font-size:13px; color:var(--text); }
.todo-item.done .todo-text { text-decoration:line-through; color:var(--muted); }

/* ── REMINDERS ── */
.reminder-inputs { display:flex; flex-direction:column; gap:7px; margin-bottom:12px; flex-shrink:0; }

.reminder-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 9px 12px;
  background: var(--surface2);
  border-radius: 9px;
  border: 1px solid transparent;
  flex-shrink: 0;
}
.reminder-item.today { border-color: rgba(245,166,35,0.4); background: rgba(245,166,35,0.06); }

.r-dot { width:7px; height:7px; border-radius:50%; background:var(--muted); flex-shrink:0; }
.reminder-item.today .r-dot { background: var(--warning); }
.r-info { flex:1; min-width:0; }
.r-title { font-size:13px; color:var(--text); white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.r-date  { font-size:11px; color:var(--muted); margin-top:1px; }
.reminder-item.today .r-date { color: var(--warning); }
.r-badge { font-size:9px; font-weight:700; letter-spacing:.5px; background:var(--warning); color:#000; border-radius:4px; padding:2px 6px; flex-shrink:0; }



/* ── NOTES ── */
#notes-area {
  background: var(--surface2);
  border: 1px solid var(--border);
  border-radius: 9px;
  padding: 12px 14px;
  color: var(--text);
  font-family: var(--fb);
  font-size: 13px;
  line-height: 1.6;
  resize: vertical;
  min-height: 120px;
  width: 100%;
  outline: none;
  transition: border-color 0.2s;
}
#notes-area:focus { border-color: var(--accent); }
#notes-area::placeholder { color: var(--muted); }
.notes-status { font-size: 11px; color: var(--muted); margin-top: 8px; flex-shrink: 0; }

.note-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 9px 12px;
  background: var(--surface2);
  border-radius: 9px;
  border: 1px solid transparent;
  flex-shrink: 0;
  transition: border-color 0.15s;
  cursor: pointer;
}
.note-item:hover { border-color: var(--border); }
.note-item.active { border-color: var(--accent); background: rgba(91,141,238,0.06); }
.note-info { flex: 1; min-width: 0; }
.note-title { font-size: 13px; font-weight: 600; color: var(--text); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.note-preview { font-size: 11px; color: var(--muted); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; margin-top: 1px; }
.note-date { font-size: 10px; color: var(--muted); flex-shrink: 0; white-space: nowrap; }

.list-empty { text-align:center; padding:20px 0; font-size:13px; color:var(--muted); }

::-webkit-scrollbar { width:5px; }
::-webkit-scrollbar-track { background:transparent; }
::-webkit-scrollbar-thumb { background:rgba(255,255,255,0.08); border-radius:4px; }




/* ── SEARCH BAR ── */
.search-bar-wrap {
  position: fixed;
  top: 18px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 800;
  width: min(480px, calc(100vw - 200px));
}
.search-bar-inner {
  display: flex;
  align-items: center;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 0 14px;
  gap: 8px;
  transition: border-color 0.2s, box-shadow 0.2s;
}
.search-bar-inner:focus-within {
  border-color: var(--accent);
  box-shadow: 0 0 0 3px rgba(91,141,238,0.12);
}
.search-icon { font-size: 14px; color: var(--muted); flex-shrink: 0; }
#global-search {
  background: transparent !important;
  border: none !important;
  border-radius: 0 !important;
  padding: 10px 0 !important;
  font-size: 13px;
  color: var(--text);
  width: 100%;
  outline: none !important;
}
.search-clear {
  background: none; border: none; color: var(--muted); cursor: pointer;
  font-size: 16px; padding: 0; line-height: 1; flex-shrink: 0; display: none;
}
.search-clear.visible { display: block; }
.search-clear:hover { color: var(--text); }

/* Results dropdown */
.search-results {
  display: none;
  position: absolute;
  top: calc(100% + 6px);
  left: 0; right: 0;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 12px;
  overflow: hidden;
  box-shadow: 0 12px 40px rgba(0,0,0,0.4);
  max-height: 360px;
  overflow-y: auto;
}
.search-results.open { display: block; animation: fadeIn 0.15s ease; }
.search-section-title {
  font-size: 10px; font-weight: 700; letter-spacing: 1px;
  text-transform: uppercase; color: var(--muted);
  padding: 10px 16px 6px;
}
.search-result-item {
  display: flex; align-items: center; gap: 10px;
  padding: 10px 16px; cursor: pointer;
  transition: background 0.1s;
}
.search-result-item:hover { background: var(--surface2); }
.search-result-icon { font-size: 15px; flex-shrink: 0; }
.search-result-text { flex: 1; min-width: 0; }
.search-result-title { font-size: 13px; color: var(--text); white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.search-result-sub   { font-size: 11px; color: var(--muted); white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.search-no-results   { padding: 20px 16px; text-align: center; font-size: 13px; color: var(--muted); }
mark { background: rgba(91,141,238,0.25); color: var(--accent); border-radius: 2px; padding: 0 1px; }


/* ── NOTIFICATION TOASTS ── */
#notif-container {
  position: fixed;
  bottom: 24px;
  right: 24px;
  z-index: 1100;
  display: flex;
  flex-direction: column;
  gap: 10px;
  pointer-events: none;
}
.notif-toast {
  background: var(--surface);
  border: 1px solid var(--border);
  border-left: 4px solid var(--warning);
  border-radius: 12px;
  padding: 14px 16px;
  min-width: 280px;
  max-width: 340px;
  box-shadow: 0 8px 32px rgba(0,0,0,0.4);
  pointer-events: all;
  animation: toastIn 0.3s ease;
  display: flex;
  gap: 12px;
  align-items: flex-start;
  cursor: pointer;
}
@keyframes toastIn { from{opacity:0;transform:translateX(20px)} to{opacity:1;transform:translateX(0)} }
.notif-toast.hiding { animation: toastOut 0.25s ease forwards; }
@keyframes toastOut { to{opacity:0;transform:translateX(20px)} }
.notif-icon { font-size:20px; flex-shrink:0; line-height:1.2; }
.notif-body { flex:1; min-width:0; }
.notif-title { font-size:13px; font-weight:600; color:var(--text); }
.notif-time  { font-size:11px; color:var(--muted); margin-top:2px; }
.notif-dismiss { background:none; border:none; color:var(--muted); cursor:pointer; font-size:16px; padding:0; flex-shrink:0; }
.notif-dismiss:hover { color:var(--text); }


/* Refresh button */
.btn-refresh {
  background: transparent;
  border: 1px solid var(--border);
  color: var(--muted);
  border-radius: 7px;
  width: 26px; height: 26px;
  display: flex; align-items: center; justify-content: center;
  cursor: pointer;
  font-size: 13px;
  flex-shrink: 0;
  transition: all 0.15s;
  line-height: 1;
}
.btn-refresh:hover { border-color: var(--accent); color: var(--accent); background: rgba(91,141,238,0.08); }
.btn-refresh.spinning { animation: spin 0.6s linear infinite; }
@keyframes spin { to { transform: rotate(360deg); } }

/* ── DRAG TO REORDER ── */
.card { cursor: grab; user-select: none; }
.card:active { cursor: grabbing; }
.card.drag-over {
  outline: 2px dashed var(--accent);
  outline-offset: 3px;
  background: rgba(91,141,238,0.05);
}
.card.dragging { opacity: 0.4; }
.card-header .drag-handle {
  color: var(--muted);
  font-size: 14px;
  cursor: grab;
  margin-right: 4px;
  opacity: 0.5;
}
.card-header .drag-handle:hover { opacity: 1; }

/* ── LIGHT MODE ── */
body.light {
  --bg:       #f0f2f7;
  --surface:  #ffffff;
  --surface2: #eef0f6;
  --border:   rgba(0,0,0,0.09);
  --text:     #1a1a2e;
  --text2:    #4a4a6a;
  --muted:    #9090aa;
  background-image:
    radial-gradient(ellipse 70% 40% at 15% 5%,  rgba(91,141,238,0.06) 0%, transparent 60%),
    radial-gradient(ellipse 50% 30% at 85% 90%, rgba(168,85,247,0.04) 0%, transparent 60%);
}
body.light input[type="text"],
body.light input[type="datetime-local"] { color: var(--text); }
body.light input[type="datetime-local"]::-webkit-calendar-picker-indicator { filter: none; }

/* Theme toggle button */
#theme-toggle {
  position: fixed;
  top: 18px; right: 18px;
  z-index: 800;
  background: var(--surface);
  border: 1px solid var(--border);
  color: var(--text2);
  border-radius: 10px;
  padding: 7px 13px;
  font-family: var(--fb);
  font-size: 12px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s;
  display: flex; align-items: center; gap: 6px;
}
#theme-toggle:hover { border-color: var(--accent); color: var(--accent); }


/* Unread badge */
.unread-badge {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  background: var(--accent);
  color: white;
  font-size: 10px;
  font-weight: 700;
  border-radius: 10px;
  padding: 1px 7px;
  min-width: 20px;
  margin-left: 6px;
  vertical-align: middle;
}

/* ── WIDGET EXPAND ── */
.card-header {
  display: flex;
  align-items: center;
  margin-bottom: 14px;
  flex-shrink: 0;
}
.card-header .card-label { margin-bottom: 0; flex: 1; }
.btn-expand {
  background: transparent;
  border: 1px solid var(--border);
  color: var(--muted);
  border-radius: 7px;
  width: 26px; height: 26px;
  display: flex; align-items: center; justify-content: center;
  cursor: pointer;
  font-size: 13px;
  flex-shrink: 0;
  transition: all 0.15s;
  line-height: 1;
}
.btn-expand:hover { border-color: var(--accent); color: var(--accent); background: rgba(91,141,238,0.08); }

/* Widget overlay */
.widget-overlay {
  display: none;
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.8);
  backdrop-filter: blur(8px);
  z-index: 900;
  align-items: center;
  justify-content: center;
  padding: 28px;
}
.widget-overlay.open { display: flex; animation: fadeIn 0.18s ease; }
.widget-expanded {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  width: 100%;
  max-width: 860px;
  max-height: 90vh;
  display: flex;
  flex-direction: column;
  animation: slideUp 0.2s ease;
  overflow: hidden;
}
.widget-expanded-header {
  display: flex;
  align-items: center;
  padding: 18px 24px;
  border-bottom: 1px solid var(--border);
  flex-shrink: 0;
  gap: 12px;
}
.widget-expanded-title {
  font-size: 10px;
  font-weight: 600;
  letter-spacing: 1.5px;
  text-transform: uppercase;
  color: var(--muted);
  flex: 1;
}
.widget-expanded-body {
  flex: 1;
  overflow-y: auto;
  padding: 20px 24px;
  display: flex;
  flex-direction: column;
}
.widget-expanded-body .email-scroll,
.widget-expanded-body .cal-scroll,
.widget-expanded-body .item-scroll {
  max-height: none;
  flex: 1;
}
.widget-expanded-body .email-tabs { flex-shrink: 0; }

/* Email modal maximise */
.email-modal.maximised {
  max-width: 100%;
  max-height: 100%;
  border-radius: 0;
  height: 100%;
}
.email-modal-backdrop.maximised { padding: 0; }
.btn-maximise {
  background: var(--surface2); border: 1px solid var(--border); color: var(--text2);
  border-radius: 8px; width:32px; height:32px; display:flex; align-items:center; justify-content:center;
  cursor:pointer; font-size:14px; flex-shrink:0; transition:all 0.15s; line-height:1;
}
.btn-maximise:hover { background: rgba(255,255,255,0.08); color: var(--text); }

/* ── SETTINGS PANEL ── */
#settings-btn {
  position: fixed;
  top: 18px; right: 115px;
  z-index: 800;
  background: var(--surface);
  border: 1px solid var(--border);
  color: var(--text2);
  border-radius: 10px;
  padding: 7px 13px;
  font-family: var(--fb);
  font-size: 12px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s;
  display: flex; align-items: center; gap: 6px;
}
#settings-btn:hover { border-color: var(--accent); color: var(--accent); }

.settings-panel {
  position: fixed;
  top: 56px; right: 18px;
  z-index: 850;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  width: 300px;
  padding: 18px;
  box-shadow: 0 12px 40px rgba(0,0,0,0.4);
  display: none;
}
.settings-panel.open { display: block; animation: fadeIn 0.15s ease; }
.settings-section { margin-bottom: 18px; }
.settings-section:last-child { margin-bottom: 0; }
.settings-title { font-size: 11px; font-weight: 700; letter-spacing: 1px; text-transform: uppercase; color: var(--muted); margin-bottom: 12px; }
.settings-label { font-size: 11px; color: var(--text2); margin-bottom: 6px; display: block; }
input[type="color"] {
  width: 36px; height: 36px; border: 1px solid var(--border); border-radius: 8px;
  background: var(--surface2); cursor: pointer; padding: 2px;
}
.bg-presets { display: flex; gap: 8px; flex-wrap: wrap; margin-bottom: 12px; }
.bg-swatch {
  width: 40px; height: 40px; border-radius: 8px; cursor: pointer;
  border: 2px solid transparent; transition: border-color 0.15s, transform 0.15s;
}
.bg-swatch:hover { border-color: var(--accent); transform: scale(1.08); }

/* ── POMODORO ── */
.c-pomodoro { grid-column: span 6; text-align: center; }
.pomo-mode { font-size: 11px; font-weight: 700; letter-spacing: 1px; text-transform: uppercase; color: var(--accent); margin-bottom: 4px; }
.pomo-display { font-family: var(--fh); font-size: clamp(36px,5vw,56px); font-weight: 800; letter-spacing: -1.5px; line-height: 1; margin-bottom: 6px; }
.pomo-sessions { font-size: 12px; color: var(--muted); margin-bottom: 14px; }
.pomo-controls { display: flex; justify-content: center; gap: 10px; margin-bottom: 14px; }
.pomo-config { display: flex; justify-content: center; gap: 16px; }
.pomo-config label { font-size: 11px; color: var(--muted); display: flex; align-items: center; gap: 4px; }
.pomo-config input[type="number"] {
  width: 48px; background: var(--surface2); border: 1px solid var(--border);
  border-radius: 6px; padding: 4px 6px; color: var(--text); font-family: var(--fb);
  font-size: 12px; text-align: center; outline: none;
}
.pomo-config input[type="number"]:focus { border-color: var(--accent); }

/* ── NEWS / RSS ── */
.c-news { grid-column: span 6; }
.news-config-row { display: flex; gap: 8px; margin-bottom: 10px; }
.news-scroll {
  overflow-y: auto; flex: 1; min-height: 0; max-height: 260px;
  display: flex; flex-direction: column; gap: 6px; padding-right: 4px;
}
.news-scroll::-webkit-scrollbar { width: 3px; }
.news-scroll::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }
.news-item {
  display: block; padding: 9px 12px; background: var(--surface2); border-radius: 9px;
  text-decoration: none; color: var(--text); transition: background 0.15s; flex-shrink: 0;
}
.news-item:hover { background: rgba(255,255,255,0.05); }
.news-title { font-size: 13px; font-weight: 500; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
.news-date { font-size: 11px; color: var(--muted); margin-top: 3px; }

/* ── TODO PRIORITIES ── */
select {
  background: var(--surface2); border: 1px solid var(--border); border-radius: 9px;
  padding: 9px 10px; color: var(--text); font-family: var(--fb); font-size: 13px;
  outline: none; cursor: pointer; transition: border-color 0.2s;
}
select:focus { border-color: var(--accent); }
input[type="date"] {
  background: var(--surface2); border: 1px solid var(--border); border-radius: 9px;
  padding: 9px 10px; color: var(--text); font-family: var(--fb); font-size: 12px;
  outline: none; transition: border-color 0.2s;
}
input[type="date"]:focus { border-color: var(--accent); }
input[type="date"]::-webkit-calendar-picker-indicator { filter: invert(0.4); cursor: pointer; }
.priority-dot {
  width: 8px; height: 8px; border-radius: 50%; flex-shrink: 0;
}
.p-low { background: #22c55e; }
.p-medium { background: #f5a623; }
.p-high { background: #ef4444; }
.todo-due-badge { font-size: 11px; color: var(--muted); flex-shrink: 0; white-space: nowrap; }
.todo-due-badge.overdue { color: #ef4444; font-weight: 600; }

/* ── MARKDOWN NOTES PREVIEW ── */
.btn-preview {
  background: var(--surface2); border: 1px solid var(--border); color: var(--text2);
  border-radius: 20px; padding: 3px 12px; font-family: var(--fb); font-size: 11px;
  font-weight: 600; cursor: pointer; transition: all 0.15s; margin-right: 6px;
}
.btn-preview:hover { border-color: var(--accent); color: var(--accent); }
.btn-preview.active { background: var(--accent); color: #fff; border-color: var(--accent); }
.notes-preview {
  background: var(--surface2); border: 1px solid var(--border); border-radius: 9px;
  padding: 12px 14px; color: var(--text); font-family: var(--fb); font-size: 13px;
  line-height: 1.6; min-height: 120px; width: 100%; overflow-y: auto; max-height: 300px;
}
.notes-preview h1 { font-family: var(--fh); font-size: 22px; font-weight: 700; margin: 0 0 8px; }
.notes-preview h2 { font-family: var(--fh); font-size: 18px; font-weight: 600; margin: 0 0 6px; }
.notes-preview h3 { font-family: var(--fh); font-size: 15px; font-weight: 600; margin: 0 0 4px; }
.notes-preview code { background: rgba(91,141,238,0.12); padding: 1px 5px; border-radius: 4px; font-size: 12px; }
.notes-preview pre { background: var(--surface); border: 1px solid var(--border); border-radius: 8px; padding: 12px; overflow-x: auto; margin: 8px 0; }
.notes-preview pre code { background: none; padding: 0; }
.notes-preview blockquote { border-left: 3px solid var(--accent); padding-left: 12px; color: var(--text2); margin: 8px 0; }
.notes-preview ul, .notes-preview ol { padding-left: 20px; margin: 6px 0; }
.notes-preview a { color: var(--accent); }
.notes-preview strong { color: var(--text); }

/* ── RESPONSIVE: NEW CARDS ── */
@media (max-width: 820px) {
  .c-pomodoro, .c-news { grid-column: span 12; }
}

/* ── CARD ANIMATION DELAYS: NEW CARDS ── */
.card:nth-child(8){animation-delay:.39s}
.card:nth-child(9){animation-delay:.44s}

/* ── LIGHT MODE ADDITIONS ── */
body.light select { color: var(--text); }
body.light input[type="date"] { color: var(--text); }
body.light input[type="date"]::-webkit-calendar-picker-indicator { filter: none; }
body.light input[type="color"] { background: var(--surface2); }
body.light .settings-panel { box-shadow: 0 12px 40px rgba(0,0,0,0.15); }
