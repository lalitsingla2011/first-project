<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>My Dashboard</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Sora:wght@400;600;700;800&display=swap" rel="stylesheet"/>
  <link rel="stylesheet" href="style.css"/>
</head>
<body>
<div class="search-bar-wrap" id="search-bar-wrap">
  <div class="search-bar-inner">
    <span class="search-icon">ğŸ”</span>
    <input type="text" id="global-search" placeholder="Search emails and todos..." autocomplete="off"
      oninput="onSearchInput(this.value)" onkeydown="onSearchKey(event)"/>
    <button class="search-clear" id="search-clear" onclick="clearSearch()">âœ•</button>
  </div>
  <div class="search-results" id="search-results"></div>
</div>
<button id="theme-toggle" onclick="toggleTheme()" title="Toggle theme">ğŸŒ™ Dark</button>
<div class="grid">

  <!-- CLOCK + QUOTE -->
  <div class="card c-clock">
    <div class="card-header">
      <div class="card-label">Time & Quote</div>
      <button class="btn-expand" onclick="expandWidget('clock')" title="Expand">â¤¢</button>
    </div>
    <div id="clock-time">00:00:00</div>
    <div id="clock-date"></div>
    <div id="clock-greeting"></div>
    <hr class="clock-quote-divider"/>
    <div class="clock-quote-mark">"</div>
    <div id="clock-quote-text">Loading quoteâ€¦</div>
    <div id="clock-quote-author" style="display:none"></div>
  </div>

  <!-- WEATHER -->
  <div class="card c-weather">
    <div class="card-header">
      <div class="card-label" id="weather-label">Weather Â· London</div>
      <button class="btn-expand" onclick="expandWidget('weather')" title="Expand">â¤¢</button>
    </div>
    <div id="weather-city-row" style="display:flex;gap:8px;margin-bottom:14px;flex-shrink:0">
      <input type="text" id="weather-city-input" placeholder="Enter city name..." style="flex:1" value="London"/>
      <button class="btn" style="padding:9px 14px;font-size:12px" onclick="changeWeatherCity()">Go</button>
    </div>
    <div id="weather-content"><span style="color:var(--muted);font-size:13px">Fetching weather...</span></div>
  </div>

  <!-- GMAIL -->
  <div class="card c-gmail">
    <div class="card-header">
      <div class="card-label">Gmail â€” Inbox<span class="unread-badge" id="unread-badge" style="display:none">0</span></div>
      <button class="btn-refresh" id="gmail-refresh" onclick="refreshGmail()" title="Refresh emails">â†»</button>
      <button class="btn-expand" onclick="expandWidget('gmail')" title="Expand">â¤¢</button>
    </div>

    <div id="gmail-setup" class="setup-notice">
      <div class="si">ğŸ“¬</div>
      <p>Connect Gmail to see colour-coded emails here.<br/><strong>Uses your Google API key</strong> â€” already set up.</p>
      <button class="btn-connect" onclick="startGoogleAuth()">Connect Google</button>
    </div>

    <div id="gmail-connected">
      <!-- Category tabs -->
      <div class="email-tabs" id="email-tabs">
        <button class="email-tab tab-all active" onclick="setEmailTab('all')">All <span class="tab-count" id="tc-all">0</span></button>
        <button class="email-tab tab-work"     onclick="setEmailTab('work')"><span class="tab-dot" style="background:var(--work)"></span>Work <span class="tab-count" id="tc-work">0</span></button>
        <button class="email-tab tab-social"   onclick="setEmailTab('social')"><span class="tab-dot" style="background:var(--social)"></span>Social <span class="tab-count" id="tc-social">0</span></button>
        <button class="email-tab tab-shopping" onclick="setEmailTab('shopping')"><span class="tab-dot" style="background:var(--shopping)"></span>Shopping <span class="tab-count" id="tc-shopping">0</span></button>
        <button class="email-tab tab-finance"  onclick="setEmailTab('finance')"><span class="tab-dot" style="background:var(--finance)"></span>Finance <span class="tab-count" id="tc-finance">0</span></button>
        <button class="email-tab tab-other"    onclick="setEmailTab('other')"><span class="tab-dot" style="background:var(--muted)"></span>Other <span class="tab-count" id="tc-other">0</span></button>
      </div>
      <div class="email-scroll" id="gmail-emails">
        <div class="list-empty">Loading emails...</div>
      </div>
    </div>
  </div>

  <!-- GOOGLE CALENDAR -->
  <div class="card c-calendar">
    <div class="card-header">
      <div class="card-label">Google Calendar â€” Today</div>
      <button class="btn-refresh" id="calendar-refresh" onclick="refreshCalendar()" title="Refresh calendar">â†»</button>
      <button class="btn-expand" onclick="expandWidget('calendar')" title="Expand">â¤¢</button>
    </div>

    <div id="gcal-setup" class="setup-notice">
      <div class="si">ğŸ“…</div>
      <p>Connect Google Calendar to see today's events.<br/><strong>Same connection as Gmail</strong> â€” one click.</p>
      <button class="btn-connect" onclick="startGoogleAuth()">Connect Google</button>
    </div>

    <div id="gcal-connected">
      <div class="cal-scroll" id="gcal-events">
        <div class="list-empty">Loading events...</div>
      </div>
    </div>
  </div>

  <!-- TO-DO -->
  <div class="card c-todo">
    <div class="card-header">
      <div class="card-label">To-Do</div>
      <button class="btn-expand" onclick="expandWidget('todo')" title="Expand">â¤¢</button>
    </div>
    <div class="input-row">
      <input type="text" id="todo-input" placeholder="Add a task..." maxlength="80"/>
      <button class="btn" onclick="addTodo()">Add</button>
    </div>
    <div class="item-scroll" id="todo-list"></div>
  </div>

  <!-- MANUAL REMINDERS -->
  <div class="card c-reminder">
    <div class="card-header">
      <div class="card-label">Reminders</div>
      <button class="btn-expand" onclick="expandWidget('reminder')" title="Expand">â¤¢</button>
    </div>
    <div class="reminder-inputs">
      <input type="text"           id="r-title" placeholder="Reminder title..." maxlength="60"/>
      <input type="datetime-local" id="r-date"/>
      <button class="btn" onclick="addReminder()">Add Reminder</button>
    </div>
    <div class="item-scroll" id="reminder-list"></div>
  </div>

</div>

<!-- NOTES (pinned bottom) -->
<div class="card c-notes">
  <div class="card-header">
    <div class="card-label">Notes</div>
    <button class="btn-expand" onclick="expandWidget('notes')" title="Expand">â¤¢</button>
  </div>
  <textarea id="notes-area" placeholder="Type your notes here..."></textarea>
  <div class="notes-status" id="notes-status"></div>
</div>

<script src="script.js"></script>


<div id="notif-container"></div>

<!-- â”€â”€ WIDGET OVERLAY â”€â”€ -->
<div class="widget-overlay" id="widget-overlay" onclick="closeWidget(event)">
  <div class="widget-expanded" id="widget-expanded">
    <div class="widget-expanded-header">
      <div class="widget-expanded-title" id="widget-expanded-title"></div>
      <button class="modal-close" onclick="closeWidget()">âœ•</button>
    </div>
    <div class="widget-expanded-body" id="widget-expanded-body"></div>
  </div>
</div>

<!-- â”€â”€ EMAIL READER MODAL â”€â”€ -->
<div class="email-modal-backdrop" id="email-modal-backdrop" onclick="closeEmailModal(event)">
  <div class="email-modal" id="email-modal">
    <div class="modal-header">
      <div class="modal-header-top">
        <div class="modal-subject" id="modal-subject"></div>
        <button class="btn-maximise" id="btn-maximise" onclick="toggleMaximise()" title="Maximise">â¤¡</button>
        <button class="modal-close" onclick="closeEmailModal()">âœ•</button>
      </div>
      <div class="modal-from" id="modal-from"></div>
      <div class="modal-meta">
        <span class="modal-date" id="modal-date"></span>
        <span class="modal-cat-badge" id="modal-badge"></span>
      </div>
    </div>
    <div class="modal-body" id="modal-body">
      <div class="modal-loading">Loading emailâ€¦</div>
    </div>
  </div>
</div>
</body>
</html>
